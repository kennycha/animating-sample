(this["webpackJsonpanimating-sample"]=this["webpackJsonpanimating-sample"]||[]).push([[0],{27:function(e,n,t){},32:function(e,n,t){"use strict";t.r(n);var a,r=t(2),i=t(1),o=t.n(i),c=t(14),s=t.n(c),d=(t(27),t(3)),l=t(4),u=t(5),b=t(9),v=t(0),f=t(21),m=t(15),p=t(16),j=t(17),h=t(11),w=t.n(h),O=["map","aoMap","emissiveMap","glossinessMap","metalnessMap","normalMap","roughnessMap","specularMap"],g=function(e){var n=e.id,t=e.inputUrl,r=e.setLoadedObj,o=(e.mixer,e.setMixer),c=Object(i.useState)([]),s=Object(d.a)(c,2),l=s[0],u=s[1],h=Object(i.useState)(void 0),g=Object(d.a)(h,2),x=g[0],C=g[1],k=Object(i.useState)(void 0),E=Object(d.a)(k,2),S=E[0],y=E[1],M=new v.i,L=Object(i.useCallback)((function(){var e=new v.V;return e.background=new v.j(12303291),e.fog=new v.t(12303291,10,80),C(e),e}),[]),P=Object(i.useCallback)((function(e){var n=e.renderingDiv;if(n)for(n.removeEventListener("keydown",T),n.removeEventListener("keyup",U);n.firstChild;)n.removeChild(n.firstChild);l.forEach((function(e){null===x||void 0===x||x.remove(e),e.traverse((function(e){e.isMesh&&(e.geometry.dispose(),(w.a.isArray(e.material)?e.material:[e.material]).forEach((function(e){O.forEach((function(n){var t;null===(t=e[n])||void 0===t||t.dispose()}))})))}))})),u([]),C(void 0)}),[]),z=Object(i.useCallback)((function(){var e=new v.M(50,window.innerWidth/window.innerHeight,.1,500);return e.position.set(-20,20,2),e.lookAt(0,0,0),e}),[]),D=Object(i.useCallback)((function(e){e.renderingDiv;var n=new v.lb({antialias:!0,alpha:!0});return n.setPixelRatio(window.devicePixelRatio),n.shadowMap.enabled=!0,n.outputEncoding=v.mb,n}),[]),R=Object(i.useCallback)((function(e){var n=e.scene,t=new v.v(11184810);t.position.set(0,20,0),n.add(t);var a=new v.m(16777215,.54);a.position.set(-8,12,8),a.castShadow=!0,a.shadow.mapSize=new v.hb(1e3,1e3),a.shadow.camera.near=.1,a.shadow.camera.far=1500;var r=8.25;a.shadow.camera.left=-1*r,a.shadow.camera.right=r,a.shadow.camera.top=r,a.shadow.camera.bottom=-1*r,n.add(a)}),[]),H=Object(i.useCallback)((function(e){var n=e.scene,t=e.camera,a=e.renderer,r=(new v.eb).load("texture/texture_01.png",(function(){a.render(n,t)}));r.wrapS=v.U,r.wrapT=v.U,r.repeat.set(300,300);var i=new v.E(new v.O(1e3,1e3),new v.H({color:12303291,map:r,depthWrite:!1,side:v.n}));i.position.set(0,0,0),i.rotation.x=-Math.PI/2,i.receiveShadow=!0,n.add(i);var o=new v.x({color:"#EA2027"}),c=new v.x({color:"#0652DD"}),s=[new v.ib(-500,0,0),new v.ib(500,0,0)],d=[new v.ib(0,0,-500),new v.ib(0,0,500)],l=(new v.g).setFromPoints(s),u=(new v.g).setFromPoints(d),b=new v.w(l,o),f=new v.w(u,c);n.add(b,f)}),[]),A=Object(i.useCallback)((function(e){var n=e.camera,t=e.renderer,a=new m.a(n,t.domElement);return a.target.set(0,0,0),a.update(),a.enabled=!0,a.enablePan=!0,a.maxDistance=100,a.minZoom=1.0001,a.addEventListener("change",(function(){if(a.object.position.y<1.01){var e=a.object.position,n=e.x,t=e.y,r=e.z;a.object.position.set(n,t+.01,r)}if(a.object.position.y>100){var i=a.object.position,o=i.x,c=i.y,s=i.z;a.object.position.set(o,c-1,s)}})),u([].concat(Object(b.a)(l),[a])),a}),[]),B=Object(i.useCallback)((function(e){var n=e.scene,t=e.camera,a=e.renderer,r=e.cameraControls,i=new p.a(t,a.domElement);return i.addEventListener("change",(function(){a.render(n,t)})),i.addEventListener("dragging-changed",(function(e){r.enabled=!e.value})),u([].concat(Object(b.a)(l),[i])),n.add(i),i}),[]),T=function(e){var n=e.event,t=e.transformControls;switch(console.log(t),n.keyCode){case 27:t&&(t.detach(),y(void 0));break;case 81:t&&t.setSpace("local"===t.space?"world":"local");break;case 91:t&&(t.setTranslationSnap(10),t.setRotationSnap(v.B.degToRad(15)));break;case 87:t&&t.setMode("translate");break;case 69:t&&t.setMode("rotate");break;case 82:t&&t.setMode("scale");break;case 187:case 107:t&&t.size<2&&t.setSize(t.size+.1);break;case 189:case 109:t&&t.size>.2&&t.setSize(t.size-.1)}},U=function(e){var n=e.event,t=e.transformControls;switch(n.keyCode){case 91:t&&(t.setTranslationSnap(null),t.setRotationSnap(null))}};Object(i.useEffect)((function(){var e=document.getElementById(n),i=L(),c=z(),s=D({renderingDiv:e});R({scene:i}),H({scene:i,camera:c,renderer:s});var d=A({camera:c,renderer:s}),m=B({scene:i,camera:c,renderer:s,cameraControls:d});t&&(e.addEventListener("keydown",(function(e){return T({event:e,transformControls:m})})),e.addEventListener("keyup",(function(e){return U({event:e,transformControls:m})})),(new f.a).load(t,(function(e){r(e),function(e){var n=e.object;a=new v.c(n),o(a)}({object:e});var n=function(e){var n=e.scene,t=e.object;t.scale.multiplyScalar(.05),t.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}));var a=t;return u([].concat(Object(b.a)(l),[a])),n.add(a),a}({scene:i,object:e});!function(e){var n=e.skeletonHelper,t=e.camera,a=e.renderer,r=e.cameraControls,i=e.transformControls;n.bones.forEach((function(e){var n=new v.H({color:16777215,opacity:.5,transparent:!0});n.depthWrite=!1,n.depthTest=!1;var t=new v.Z(1,32,32),a=new v.E(t,n);e.add(a)}));var o=new j.a(n.bones,t,a.domElement);o.addEventListener("hoveron",(function(){r.enabled=!1})),o.addEventListener("hoveroff",(function(){r.enabled=!0})),o.addEventListener("dragstart",(function(e){S!==e.object.parent&&(i.attach(e.object.parent),y(e.object.parent),o.enabled=!1)})),o.addEventListener("dragend",(function(e){o.enabled=!0}))}({skeletonHelper:function(e){var n=e.scene,t=e.model,a=new v.X(t);return a.visible=!0,n.add(a),a}({scene:i,model:n}),camera:c,renderer:s,cameraControls:d,transformControls:m})})));e.appendChild(s.domElement);return function e(){if(a&&a.update(M.getDelta()),function(e){var t=e.renderer,a=t.domElement,r=window.innerWidth,i=window.innerHeight,o=a.width/window.devicePixelRatio,c=a.height/window.devicePixelRatio,s=o!==r||c!==i;if(s){var d,l,u=document.getElementById(n);t.setSize(null!==(d=null===u||void 0===u?void 0:u.clientWidth)&&void 0!==d?d:0,null!==(l=null===u||void 0===u?void 0:u.clientHeight)&&void 0!==l?l:0,!1)}return s}({renderer:s})){var t=s.domElement;c.aspect=t.clientWidth/t.clientHeight,c.updateProjectionMatrix()}s.render(i,c),requestAnimationFrame(e)}(),function(){P({renderingDiv:e})}}),[t])};function x(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  border-right: 1px solid gray;\n  cursor: pointer;\n"]);return x=function(){return e},e}function C(){var e=Object(l.a)(["\n  width: 100%;\n  height: 40px;\n  display: flex;\n  border-bottom: 1px solid gray;\n"]);return C=function(){return e},e}function k(){var e=Object(l.a)(["\n  min-height: 1024px;\n"]);return k=function(){return e},e}function E(){var e=Object(l.a)([""]);return E=function(){return e},e}function S(){var e=Object(l.a)(["\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5rem;\n"]);return S=function(){return e},e}var y=u.a.div(S()),M=u.a.input(E()),L=u.a.div(k()),P=u.a.div(C()),z=u.a.div(x()),D=function(){var e=Object(i.useState)(void 0),n=Object(d.a)(e,2),t=n[0],a=n[1],o=Object(i.useState)(void 0),c=Object(d.a)(o,2),s=c[0],l=c[1],u=Object(i.useState)(void 0),b=Object(d.a)(u,2),f=b[0],m=b[1],p=Object(i.useState)(void 0),j=Object(d.a)(p,2),h=j[0],w=j[1],O=Object(i.useState)([]),x=Object(d.a)(O,2),C=x[0],k=x[1];return g({id:"renderingDiv",inputUrl:t,setLoadedObj:l,mixer:f,setMixer:m}),function(e){var n=e.mixer,t=e.loadedObj,a=e.setCurrentClip,r=e.setPossibleClips,o=Object(i.useCallback)((function(e){var t=e.object.animations,i=t.map((function(e){var a=v.b.findByName(t,e.name);return null===n||void 0===n?void 0:n.clipAction(a)}));a(i[0]),r(i)}),[n,t]);Object(i.useEffect)((function(){n&&o({object:t})}),[n])}({mixer:f,loadedObj:s,setCurrentClip:w,setPossibleClips:k}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y,{children:"Animating Sample"}),Object(r.jsx)(M,{type:"file",accept:".fbx",onChange:function(e){var n=e.target.files[0],t=URL.createObjectURL(n);a(t)}}),Object(r.jsx)(L,{id:"renderingDiv"}),h&&Object(r.jsxs)(P,{children:[Object(r.jsx)(z,{onClick:function(){f.setTime(0),h.reset()},children:"Reset"}),Object(r.jsx)(z,{onClick:function(){f.timeScale=-.3,h.play()},children:"Backward"}),Object(r.jsx)(z,{onClick:function(){f.timeScale=.3,h.play()},children:"Forward"}),Object(r.jsx)(z,{onClick:function(){f.timeScale=0},children:"Pause"}),Object(r.jsx)(z,{onClick:function(){h.stop()},children:"Stop"})]}),0!==C.length&&Object(r.jsx)(P,{children:C&&C.map((function(e,n){return Object(r.jsx)(z,{onClick:function(){return function(e){var n=e.clip;console.log(n._clip.name),h.stop(),w(n)}({clip:e})},children:"Anim #".concat(n+1)},n)}))})]})};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.6f6d0b0a.chunk.js.map